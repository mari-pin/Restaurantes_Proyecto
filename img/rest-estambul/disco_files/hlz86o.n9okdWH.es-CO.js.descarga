(this.$WP=this.$WP||[]).push(["hlz86o",(e,t)=>{var l,i,a,r,n,s,d,o,c,u,m,f,b,h,_,v,g,p,w,y,C,N,S,A,R,I,E,L,M,k,T,W,O,B,F,P,x,G,D,z,j,V,Y,H,q,$,U,X,Z,K,Q,J,ee,et,el,ei=({title:e,thumbnailSource:t,sizeHint:a,selected:r,onClick:n})=>l("button",{type:"button",onClick:n,className:"JYJOz Gi _S Wh",children:[i("div",{className:b("YjpDv",{"fGzmW Re z":r}),children:i(h,{roundingMode:"all",roundingSize:"medium",source:t,height:"100%",alt:e,sizeHint:a})}),i(_,{variant:r?"supporting-03":"supporting-01",marginTop:"spacing-02",lineClamp:2,children:e})]}),ea=()=>l("div",{className:"RlbWn",children:[i("div",{className:"njdDx",children:i(v,{height:"100%"})}),i("div",{className:"Mj",children:i(v,{width:"65%",height:"17px"})})]}),er={albumContainer:"DvMLl _e Q2",albumItem:"F0"},en=({albums:e,fetching:t,selectedAlbumId:l,onAlbumSelected:a})=>{var r=!t&&e.length?e.map(e=>e?.albumId&&e.thumbnail?.source&&e.count?i("div",{className:er.albumItem,children:i(q,{title:e.title||"",thumbnailSource:e.thumbnail.source,sizeHint:{mobile:"25vw",tablet:"15vw",desktop:"11vw"},onClick:()=>{e.albumId&&a?.(e.albumId)},selected:l===e.albumId})},`item-${e.albumId}`):null):t&&[,,,,].fill(null).map((e,t)=>i("div",{className:er.albumItem,children:i($,{})},t))||null;return i("div",{className:er.albumContainer,children:r})},es={container:"jjPPF f w u",showAllPills:"hNtfM",pills:"BRNuY f K",seeAllButton:"CFZYs NM"},ed=(e,t)=>{var l=t-((e.button||0)+16);return e.pills.filter(Boolean).reduce((i,a)=>{var r=i.totalWidth+a+8;return{totalPills:r<=l||i.totalPills+1===e.pills.length&&r-8<=t?i.totalPills+1:i.totalPills,totalWidth:r}},{totalPills:0,totalWidth:0}).totalPills},eo=({collapsible:e,selectorConfig:{options:t,onSelect:a,selected:c}})=>{var{containerRef:u,pillsRef:m,buttonRef:f}=r({containerRef:n(),pillsRef:t.map(()=>n()),buttonRef:n()}).current,[h,_]=s(e),[v,p]=s(t.length),[w,y]=s({pills:t.map(()=>null),button:null}),C=d(()=>{if(!e){var t=ed(w,u.current?.offsetWidth||0);w.pills.some(Boolean)&&p(t)}},[e,w,u]);o(()=>{!e&&m.some(e=>e.current?.offsetWidth)&&w.pills.length&&w.pills.every(e=>null===e)&&y({pills:m.map(e=>e.current?.offsetWidth||0),button:f.current?.offsetWidth||0}),C()},[e,m,f,f.current?.offsetWidth,w,C]);var N=!w.button||v!==t.length;return l("div",{className:b(es.container,{[es.showAllPills]:h}),ref:u,"data-testid":"pills",children:[i(M,{callback:C,throttle:100}),i("div",{className:es.pills,children:t.slice(0,h?t.length:v).map(({label:e,value:t},l)=>i("div",{ref:m[l],"data-testid":"pill",children:i(I,{selected:t===c,onClick:()=>a(t,"GALLERY_VIEWER"),children:i(g,{id:"airm_geo_fffff486",args:{0:e.name,1:e.count},messages:"{0} ({1})"})})},e.name))}),!e&&N&&i("div",{className:b(es.seeAllButton,{[es.showAllPills]:h}),ref:f,children:i(R,{icon:h?L:E,trailing:!0,variant:"primary-small",onClick:()=>_(!h),children:h?i(g,{id:"mv_hide_filters",messages:"Ocultar filtros"}):i(g,{id:"mv_see_all_filters",messages:"Ver todos los filtros"})})})]})},ec={divider:"mbZgu",chips:"pgZiU f k",sorting:"OvmHR",tabs:"xGcnX"},eu=(e,t)=>{switch(t){case k.allUnrestricted:case k.allIncludingRestricted:return e.string("todos","mv_photos_from_everyone");case k.traveler:return e.string("viajeros","mv_photos_from_travelers");case k.staff:return e.string("profesionales","mv_photos_from_professionals");case k.management:return e.string("gerencia","mv_photos_from_management");default:return t||""}},em=(e,t,l)=>e.string("De {source} ({count})","mg_from_with_source_count",{source:eu(e,t),count:l||0}),ef=(e,t)=>{switch(t){case"featured":return e.string("Destacados","hr_mediaviewer_filter_by_featured");case"recency":return e.string("Recientes","hr_mediaviewer_filter_by_recency");default:return t}},eb=({sourceControl:e,subAlbumControl:t,sortControl:r,fetching:n})=>{var s=t.options.map(({label:e})=>e.name.length).join(""),{localize:d}=p();return l("div",{"data-testid":"header_controller",children:[i("div",{className:ec.tabs,children:!n&&e.options.length&&l(a,{children:[i(N,{value:e.selected,onChange:t=>e.onSelect(t,"GALLERY_VIEWER"),children:e.options.map(({label:{name:e,count:t},value:l})=>i(S,{value:l,children:em(d,e,t)},e))}),i("div",{className:ec.divider,children:i(y,{})})]})||n&&i(v,{width:"40%",height:"37px"})||null}),l("div",{className:ec.chips,children:[!n&&t.options.length&&i(X,{selectorConfig:t},s)||n&&i(v,{width:"20%",height:"35px"})||null,r&&i("div",{className:ec.sorting,children:i(C,{mode:"select",trigger:"chip",label:d.string("Ordenar por","hr_mediaviewer_sort_by_label"),menuVariant:"trailing-top-caret",value:r.selected,options:r.options.map(({label:e,value:t})=>({displayName:ef(d,e.name),value:t})),onChange:e=>r.onSelect(e,"GALLERY_VIEWER")})})]})]})},eh=({closeModal:e,onReset:t,onClose:a,sourceControl:r,subAlbumControl:n})=>{var{localize:s}=p();return l(x,{"data-testid":"filters_modal",variant:"fixed-height-sticky-footer",onClose:()=>{e(),a("FILTER_MODAL")},title:i(g,{id:"gallery_controller_filters",messages:"Filtros"}),buttonsAlignment:"space-between",secondaryButton:l(R,{onClick:()=>{t(),e()},children:[i(g,{id:"media_viewer_mobile_filter_reset",messages:"Restablecer"})," "]}),primaryButton:l(A,{onClick:()=>{r.onSelect(r.selected,"GALLERY_VIEWER"),n.onSelect(String(n.selected),"GALLERY_VIEWER"),e()},children:[i(g,{id:"h_show_results",messages:"Mostrar resultados"})," "]}),children:[l(_,{variant:"title-04",marginTop:"spacing-04",marginBottom:"spacing-03",children:[i(g,{id:"mv_mw_filter_source_section_header",messages:"Fuente"})," "]}),i(G,{name:"sources",children:r.options.map(e=>i(D,{value:e.value,selected:e.value===r.selected,onSelect:e=>{r.onSelect(e,"FILTER_MODAL")},label:em(s,e.label.name,e.label.count)},e.label.name))}),l(_,{variant:"title-04",marginTop:"spacing-06",marginBottom:"spacing-03",children:[i(g,{id:"mv_mw_filter_category_section_header",messages:"Categoría"})," "]}),i(X,{collapsible:!0,selectorConfig:{...n,selected:String(n.selected),onSelect:e=>{n.onSelect(e,"FILTER_MODAL")}}})]})},e_=({closeModal:e,onClose:t,sortControl:a,selected:r,onSelection:n})=>{var{localize:s}=p();return i(x,{"data-testid":"sort_modal",variant:"fixed-height-sticky-footer",title:i(g,{id:"hr_mediaviewer_sort_by_label",messages:"Ordenar por"}),onClose:()=>{e(),t("SORT_MODAL")},buttonsAlignment:"space-between",primaryButton:l(A,{onClick:()=>{a.onSelect(r,"GALLERY_VIEWER"),e(),t("SORT_MODAL")},children:[i(g,{id:"h_show_results",messages:"Mostrar resultados"})," "]}),children:i(G,{name:"Sort",children:a.options.map(e=>i(D,{value:e.value,selected:e.value===r,onSelect:e=>n("sortOption",e),label:ef(s,e.label.name)},e.label.name))})})},ev="filters",eg="sortBy",ep=({sourceControl:e,subAlbumControl:t,sortControl:a,onReset:r,onClose:n})=>{var[d,o]=s(null),c={source:e.selected,subAlbum:t.selected,sortOption:a?a.selected:""},[u,m]=s(c),f=(e,t)=>m(l=>({...l,[e]:t})),b=()=>o(null);return l("div",{"data-testid":"modal_controller",children:[l("div",{className:"f k Ma Nl MA NN",children:[l(R,{"data-testid":"filters_button",icon:F,onClick:()=>{o(()=>(m(c),ev))},children:[i(g,{id:"media_viewer_mobile_filter_menu_button",messages:"Filtrar"})," "]}),l(R,{"data-testid":"sort_button",icon:P,onClick:()=>{o(()=>(m(c),eg))},children:[i(g,{id:"media_viewer_mobile_sort_menu_button",messages:"Ordenar"})," "]})]}),(l=>{switch(l){case ev:return i(K,{closeModal:b,onClose:n,onReset:r,sourceControl:e,subAlbumControl:t});case eg:if(a)return i(Q,{closeModal:b,onClose:n,sortControl:a,selected:u.sortOption,onSelection:f});return null;default:return null}})(d)]})},ew=({headerLabel:e,sourceControl:t,subAlbumControl:r,sortControl:n,albumsFetching:s,subAlbumsFetching:d,onReset:o,onClose:c})=>{var m="MOBILE"===u();return l(a,{children:[i("div",{className:"uCgNk","data-testid":"header_label",children:i(_,{variant:m?"title-04":"title-03",children:!s&&e.name&&e.count&&i(g,{id:"airm_geo_fffff486",args:{0:e.name,1:e.count},messages:"{0} ({1})"})||s&&i(v,{width:"10%",height:m?"22px":"29px"})||null})}),m?i(J,{sourceControl:t,subAlbumControl:r,sortControl:n,onReset:o,onClose:c}):i(Z,{sourceControl:t,subAlbumControl:r,sortControl:n,fetching:d})]})},ey=({data:{id:e,uploadDate:t,source:a,caption:r,type:n,review:s,supplierCategory:d,userProfile:o},onClick:c,sizeHint:u,positionInContext:f})=>{var b,v=w(),{localize:g}=p(),y=t?v.formatDate("date_medium_month_year",new Date(t)):"";return b="OWNER"===d?g.string("De la gerencia","Photoviewer_mgmtFilter"):"STAFF"===d?g.string("Foto encargada por Tripadvisor","gallery_image_tripadvisor_provider"):o?.displayName,l("button",{className:"vKCIi w B- _S",type:"button",onClick:()=>c?.(f,e),"data-testid":"image_button_container",children:[i("div",{className:"BtGfv",children:i(h,{source:a,sizeHint:u,height:"100%",alt:r||"",lazy:!1})}),l("div",{className:"TQwng Y",children:[i("div",{className:"HGiFx s _U l"}),l("div",{className:"HqAGE f e Q1 s l Pi PW Pv PI Wh w z _a","data-testid":"information_overlay",children:[b&&l(_,{variant:"supporting-03",color:"onDarkText",children:[i("span",{children:b}),y&&l("span",{children:["\xa0•\xa0",y]})]}),(s?.rating||s?.rating===0)&&i(m,{rating:s.rating})]})]}),i(j,{type:n})]})},eC={gridContainer:"qgoXE A w",isHero:"PfqCp",skeleton:"OduDW w"},eN=(e,t)=>`${e?"fetching":"fetched"}}_${t}}`,eS=({handleViewed:e,scrollableRef:t,isHero:l,medias:a})=>{var r=V(Y(t=>{t&&a.some(e=>!e.node)&&e()},250),500,0,t);return a.every(e=>e&&!e.fetching&&!e.node)?null:i("div",{className:b(eC.gridContainer,{[eC.isHero]:l}),ref:r,"data-testid":"mosaic_layout",children:a.map(({fetching:e,node:t,position:l})=>e||t?t||i("div",{className:eC.skeleton,"data-testid":"skeleton"},eN(e,l)):null)})},eA=(e,t,l)=>l&&0===e?[0]:[0,1,2].reduce((i,a)=>{var r=3*e+a-(l?2:0);return r<t?[...i,r]:i},[]),eR=(e,t,l)=>{var i="MOBILE"===u(),[a,r]=s(10),n=i?Math.ceil((e.totalMediasCount-1)/3)+1:Math.ceil(e.totalMediasCount/3),m=c(()=>Array.from({length:n},(t,l)=>({viewed:!1,medias:eA(l,e.totalMediasCount,i).map(e=>({position:e,node:null,fetching:!0}))})),[i,n,e]),[f,b]=s(m);o(()=>{b(m)},[m]);var h=d(e=>{b(t=>{if(!t[e])return t;var i=[...t],{medias:a}=i[e];return i[e]={...t[e],viewed:!0,medias:a.map(e=>{var t=l(e.position)||{...e,fetching:!1};return{...e,...t}})},i})},[l]);return o(()=>{t||f.forEach((e,t)=>{e.viewed&&e.medias.some(e=>!e.node&&e.fetching)&&h(t)})},[t,h,f]),{lastMosaicIndexToRender:a+20,mosaics:f,getViewedHandler:e=>()=>{r(t=>Math.max(t,e)),h(e)},isMobile:i}},eI=e=>e.map(e=>`${e.position}_${e.fetching?"fetching":"fetched"}`).join("_"),eE=({mediaRendererWithStatus:e,fetching:t,galleryAlbumParams:l,scrollableRef:a})=>{var{lastMosaicIndexToRender:r,mosaics:n,getViewedHandler:s,isMobile:d}=el(l,t,e);return i("div",{className:"w",children:n.map((e,t)=>t>=r?null:i(et,{scrollableRef:a,handleViewed:s(t),isHero:d&&0===t,medias:e.medias},eI(e.medias)))})},eL={viewer:"hgUDK l _Z Gi",modalView:"TTsnX",footerOffer:"TObvI s Gi",header:"XXwWp Gi",albumSectionContainer:"KydbY Gi z",content:"TIhWB",gallery:"eRCDo",albumSection:"kIHZa",placementAds:"ILNVu",main:"lYaEG",albumSectionAd:"kcSdQ"},eM=({albums:e=[],subAlbums:t,location:n,selectedAlbumId:s,controlsSelected:d,fetching:m,hideControls:b,adSlot:h,headerOfferSlot:_,footerOfferSlot:v,getMediaData:g,actionHandler:p,saveButton:w,useEnhancements:y})=>{var{locationFetching:C,albumsFetching:N,subAlbumsFetching:S,pageFetching:A}=m,R=e=>{null!=e&&p?.({type:O.galleryItemClicked,mediaOffsetIndex:e})},I="MOBILE"===u(),E="TABLET"===u(),{subAlbumId:L,albumSource:M,sortStrategy:F}=d||{},P=F===T.recency?W.recency:W.featured,x=r(null),G=r(null),{subAlbumOptions:D,sourceOptions:j,sortOptions:V}=H({subAlbums:t,albumSource:M,albumId:s,subAlbumId:L}),Y=c(()=>e.find(e=>e.albumId===s),[e,s]),q=c(()=>j.find(e=>e.value===M)||j[0],[j,M]),$=c(()=>q?.label.count||Y?.count||0,[Y?.count,q?.label.count]),{rating:X,count:Z}=n?.reviewSummary||{},K=(X||0===X)&&!!Z,Q={options:c(()=>{if(I)return D;var e=D?.find(e=>e.value===L?.toString());return e?[e,...D.filter(t=>t!==e)]:D},[I,D,L]),selected:L?.toString()??"",onSelect:(e,t)=>{p?.({type:"FILTER_MODAL"===t?O.subAlbumSelectedInModal:O.subAlbumSelected,subAlbumId:Number(e)})}},J={options:j,selected:q?.value||k.allUnrestricted,onSelect:(e,t)=>{p?.({type:"FILTER_MODAL"===t?O.sourceAlbumSelectedInModal:O.sourceAlbumSelected,albumSource:e})}},et=$>1?{options:V,selected:P,onSelect:e=>{p?.({type:O.sortSelected,sort:e===W.recency?T.recency:T.featured})}}:null,el=c(()=>({totalMediasCount:$,albumId:s,subAlbumId:L,albumSource:M,sort:P}),[$,s,L,M,P]);return o(()=>{x.current&&x.current.scrollTo?.({top:0})},[$,s,L,M,P]),l("div",{className:`${eL.viewer} ${y?eL.modalView:""}`,ref:G,children:[i("div",{className:eL.header,"data-testid":"header",children:i(z,{titleText:n?.name,secondaryTitleContent:l(a,{children:[K&&i(f,{rating:X,numReviews:Z}),w]}),secondaryHeaderContent:_,onCloseClick:()=>p?.({type:O.close,component:B.GALLERY_VIEWER}),fetching:C,useEnhancements:y})}),l("div",{className:eL.main,children:[l("div",{className:eL.albumSectionContainer,children:[i("div",{className:`${eL.albumSection} ${h?eL.albumSectionAd:""}`,"data-testid":"album_section",children:i(U,{albums:e,fetching:m.albumsFetching,selectedAlbumId:s,onAlbumSelected:e=>p?.({type:O.albumSelectedFromGallery,albumId:e})})}),h&&i("div",{className:eL.placementAds,children:h})]}),l("div",{className:eL.content,children:[!b&&i("div",{"data-testid":"controls_section",children:i(ee,{headerLabel:{name:Y?.title||"",count:Y?.count||0},subAlbumControl:Q,sourceControl:J,sortControl:et,albumsFetching:N,subAlbumsFetching:S,onReset:()=>{p?.({type:O.resetFilter,subAlbumId:Number(D[0]?.value),albumSource:j[0]?.value||k.allUnrestricted})},onClose:e=>{"FILTER_MODAL"===e&&p?.({type:O.resetFilterInModal})}})}),i("div",{className:eL.gallery,"data-testid":"tile_gallery",ref:x,children:i(eE,{scrollableRef:I||E?G:x,galleryAlbumParams:el,fetching:A,mediaRendererWithStatus:e=>{var t=g?.(e);return t?.data?.id?{node:i(ey,{data:t.data,sizeHint:{desktop:"500px",tablet:"50vw",mobile:"50vw"},positionInContext:e,onClick:R},t.data.id),fetching:t.fetching}:{node:null,fetching:t?.fetching}}})})]})]}),v&&I&&i("div",{className:eL.footerOffer,children:v})]})};return[()=>{q=ei,$=ea,U=en,X=eo,Z=eb,K=eh,Q=e_,J=ep,ee=ew,et=eS,el=eR,e("default",eM)},[e=>(l=e.jsxs,i=e.jsx,a=e.Fragment),e=>(r=e.useRef,n=e.createRef,s=e.useState,d=e.useCallback,o=e.useEffect,c=e.useMemo),e=>u=e.useViewportCategory,e=>(m=e.BubbleRating,f=e.BubbleRatingWithReviewCount),e=>b=e.default,e=>h=e.default,e=>_=e.default,e=>v=e.Skeleton,e=>(g=e.default,p=e.useLocalize,w=e.useIntlFormatter),e=>y=e.default,e=>C=e.DropdownMenu,e=>(N=e.TabBar,S=e.Tab),e=>(A=e.default,R=e.ButtonBorderless),e=>I=e.ChipButton,e=>E=e.default,e=>L=e.default,e=>M=e.default,e=>(k=e.mediaSources,T=e.dataStrategySort,W=e.mediaSorts,O=e.MG_ACTIONS,B=e.COMPONENT_NAME),e=>F=e.default,e=>P=e.default,e=>x=e.Modal,e=>(G=e.RadioGroup,D=e.RadioButton),e=>z=e.default,e=>j=e.default,e=>V=e.useVisibleEffect,e=>Y=e.useDebouncedCallback,e=>H=e.getControlsOptions]]},["21h32l","o4yt4q","ys6v1o","bkeq24","fkji80","34bu7w","essqvy","voa3hw","7thqz4","covaqn","ntn269","227h6c","jppfwt","mqfj4j","i0z8n1","4ilds0","d6vj30","2xdx75","la678j","8e77a5","i3sz5h","frf6ac","fsp8dm","aefqpw","3btuy0","dsbyen","umcxmq"]]);
